{% extends "base.html" %}

{% block title %}Modifier un individu – Jardin de Devey{% endblock %}

{% block content %}
<div class="shadow-soft p-3 p-md-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="h5 mb-0">Modifier un individu</h1>
    <a href="{{ url_for('plant_detail', plant_id=plant['id']) }}" class="btn btn-outline btn-sm">
      Annuler
    </a>
  </div>

  <p class="mb-3 text-muted">
    <strong>Espèce :</strong>
    {{ plant['common_name'] }}
    {% if plant['variety_name'] %}
      – ‘{{ plant['variety_name'] }}’
    {% endif %}
    {% if plant['latin_name'] %}
      <br><span class="latin">{{ plant['latin_name'] }}</span>
    {% endif %}
  </p>

  <form method="post" class="row g-3">

    <div class="col-md-6">
      <label for="label" class="form-label">Étiquette / Nom de l’individu</label>
      <input
        type="text"
        name="label"
        id="label"
        class="form-control"
        value="{{ plant['label'] or '' }}"
        placeholder="Ex. Poirier nord, Noyer sud, etc."
      >
    </div>

    <div class="col-md-6">
      <label for="zone" class="form-label">Zone / secteur</label>
      <input
        type="text"
        name="zone"
        id="zone"
        class="form-control"
        value="{{ plant['zone'] or '' }}"
        placeholder="Ex. A1, verger haut, haie est..."
      >
    </div>

    <div class="col-md-6">
      <label for="lat" class="form-label">Latitude</label>
      <input
        type="text"
        name="lat"
        id="lat"
        class="form-control"
        value="{{ plant['lat'] if plant['lat'] is not none else '' }}"
        placeholder="45.348751"
      >
      <div class="form-text">
        Tu peux laisser vide si la position n’est pas encore relevée.
      </div>
    </div>

    <div class="col-md-6">
      <label for="lon" class="form-label">Longitude</label>
      <input
        type="text"
        name="lon"
        id="lon"
        class="form-control"
        value="{{ plant['lon'] if plant['lon'] is not none else '' }}"
        placeholder="4.073198"
      >
    </div>

    <div class="col-12">
      <label for="notes" class="form-label">Notes</label>
      <textarea
        name="notes"
        id="notes"
        rows="3"
        class="form-control"
        placeholder="Remarques, vigueur, porte-greffe si spécifique, historique de plantation…"
      >{{ plant['notes'] or '' }}</textarea>
    </div>

    <div class="col-md-6">
  <label for="image_local" class="form-label">Image locale (chemin relatif)</label>
  <input
    type="text"
    name="image_local"
    id="image_local"
    class="form-control"
    value="{{ plant['image_local'] or '' }}"
    placeholder="img/plants/abricotier_luizet_1.jpg"
  >
  <div class="form-text">
    Chemin relatif dans <code>static/</code>.
  </div>
</div>


    <div class="col-12 d-flex justify-content-between align-items-center mt-2">
      <a href="{{ url_for('plant_detail', plant_id=plant['id']) }}" class="btn btn-outline">
        Annuler
      </a>
      <button type="submit" class="btn btn-primary">
        Enregistrer les modifications
      </button>
    </div>
  </form>
</div>
{% endblock %}